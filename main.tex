\documentclass[12pt]{book}

\usepackage{xltxtra, amsmath, xfrac,fontspec, amsfonts, mathtools, enumitem, indentfirst} 
\usepackage{amsthm, amssymb, esint}
\usepackage{tabu}

\setlength{\parindent}{0.5in}
\usepackage{multicol}
\setlength{\columnsep}{1cm}

\usepackage{color}   %May be necessary if you want to color links
\definecolor{maroon}{rgb}{0.5,0,0}
\usepackage{hyperref}
\hypersetup{
	colorlinks=true, %set true if you want colored links
	linktoc=all,     %set to all if you want both sections and subsections linked
	linkcolor=maroon,  %choose some color if you want links to stand out
}

\usepackage{fancyhdr}

\usepackage{subfiles}

\usepackage{imakeidx}
\makeindex[title=Index]
%\usepackage[T1]{fontenc}
%\XeTeXlinebreaklocale "th"
%\XeTeXlinebreakskip = 0pt plus 0pt   %
%\sloppy

%\defaultfontfeatures{Mapping=tex-text} 
%\setmainfont{TeX Gyre Termes}	
%\setsansfont{TeX Gyre Heros}
%\setmonofont{TeX Gyre Cursor}


%\newfontfamily{\thaifont}[Scale=MatchUppercase,Mapping=tex-text]{TH Sarabun New}
%\newenvironment{thailang}
%{\thaifont}
%{}
%\usepackage[Latin,Thai]{ucharclasses}
%\setTransitionTo{Thai}{\begin{thailang}}
%	\setTransitionFrom{Thai}{\end{thailang}}
%\usepackage{setspace}
%\onehalfspacing
%\usepackage{polyglossia}
%\setdefaultlanguage{english}
%\setotherlanguage{thai}
%\newlength{\mylength}

\usepackage[top = 1.2in, bottom = 1in, left=1 in, right = 1in]{geometry}

\DeclareMathOperator\Arg{arg}
\DeclareMathOperator\cis{cis}
\DeclareMathOperator\Img{Im}
\DeclareMathOperator{\adj}{adj}

\newcommand{\dg}{^\circ}
\newcommand{\ii}{\item}
\newcommand{\ol}[1]{\overline{#1}}

\newcommand{\iv}{^{-1}}

\newcommand{\lbr}{\left\lbrace}
\newcommand{\rbr}{\right\rbrace}
\newcommand{\dps}{\displaystyle}

\newcommand{\CC}{\mathbb C}
\newcommand{\FF}{\mathbb F}
\newcommand{\NN}{\mathbb N}
\newcommand{\QQ}{\mathbb Q}
\newcommand{\RR}{\mathbb R}
\newcommand{\ZZ}{\mathbb Z}

\newcommand{\ra}{\rightarrow}
\newcommand{\lra}{\leftrightarrow}
\newcommand{\we}{\wedge}
\newcommand{\ve}{\vee}

\newcommand{\mbf}[1]{\mathbf{#1}}

\theoremstyle{definition}
\newtheorem{definition}{Definition}[section]
\newtheorem{example}{Example}[section]
\newtheorem{theorem}{Theorem}[chapter]
\newtheorem{lemma}{Lemma}[section]
\newtheorem{corollary}{Corollary}[section]
%\newtheorem{problem}{โจทย์ข้อที่}

\theoremstyle{remark}
%\newtheorem*{remark}{ข้อสังเกต}
\newtheorem*{note}{Note}

\pagestyle{fancy}%

\renewcommand{\chaptermark}[1]{%
	\markboth{#1}{}}
\renewcommand{\sectionmark}[1]{%
	\markright{\thesection\ #1}{}}		

\providecommand\gi{}
% can be useful to refer to this outside \Set
\newcommand\SetSymbol[1][]{%
	\nonscript\:#1\vert
	\allowbreak
	\nonscript\:
	\mathopen{}}
\DeclarePairedDelimiterX\Set[1]\{\}{%
	\renewcommand\gi{\SetSymbol[\delimsize]}
	#1
}
\setlength{\headheight}{18pt}

\AtBeginDocument{	
	\DeclarePairedDelimiter\abs{\lvert}{\rvert}
	\DeclarePairedDelimiter\norm{\lVert}{\rVert}
	\DeclareMathOperator{\tr}{tr}
	\DeclareMathOperator{\Span}{span}
	
	\DeclareSymbolFont{AMSb}{U}{msb}{m}{n}
	\DeclareSymbolFontAlphabet{\mathbb}{AMSb}
	
	\DeclareSymbolFont{operators}   {OT1}{cmr} {m}{n}
	\DeclareSymbolFont{letters}     {OML}{cmm} {m}{it}
	\DeclareSymbolFont{symbols}     {OMS}{cmsy}{m}{n}
	\DeclareSymbolFont{largesymbols}{OMX}{cmex}{m}{n}
	\SetSymbolFont{operators}{bold}{OT1}{cmr} {bx}{n}
	\SetSymbolFont{letters}  {bold}{OML}{cmm} {b}{it}
	\SetSymbolFont{symbols}  {bold}{OMS}{cmsy}{b}{n}
	\DeclareSymbolFontAlphabet{\mathrm}    {operators}
	\DeclareSymbolFontAlphabet{\mathnormal}{letters}
	\DeclareSymbolFontAlphabet{\mathcal}   {symbols}
	\DeclareMathAlphabet      {\mathbf}{OT1}{cmr}{bx}{n}
	\DeclareMathAlphabet      {\mathsf}{OT1}{cmss}{m}{n}
	\DeclareMathAlphabet      {\mathit}{OT1}{cmr}{m}{it}
	\DeclareMathAlphabet      {\mathtt}{OT1}{cmtt}{m}{n}
}

%\makeatletter
%\renewcommand*\env@matrix[1][*\c@MaxMatrixCols c]{%
%	\hskip -\arraycolsep
%	\let\@ifnextchar\new@ifnextchar
%	\array{#1}}
%\makeatother

\title{\textbf{Mathematics}}
\author{P. Tansuntorn}
\date{Last updated \today}
\begin{document}

	\frontmatter
	\pagestyle{plain}
	\maketitle
	\tableofcontents
	
	\pagestyle{fancy}
		\fancyhf{}%
		\fancyhead[RO,LE]{\thepage}
		\fancyhead[CO]{\textit{\rightmark}}
		\fancyhead[CE]{\textit{\leftmark}}
		\renewcommand{\headrulewidth}{0pt}
		\renewcommand{\headrulewidth}{0pt}
	
	\mainmatter
	\part{Part IA}
		\subfile{part-ia/numbers-sets}
		\subfile{part-ia/group}
		\subfile{part-ia/vectors-matrices}
		\subfile{part-ia/diff-equations}
		\subfile{part-ia/analysis-i}
		\subfile{part-ia/probability}
		\subfile{part-ia/vector-calculus}
		\subfile{part-ia/fundamental-phy}
		\subfile{part-ia/dynamics-relativity}
		
	\part{Part IB}
		\subfile{part-ib/metric}
		\subfile{part-ib/variation}
		\subfile{part-ib/linear-algebra}
		\subfile{part-ib/groups-rings-modules}
		\subfile{part-ib/analysis-ii}
		\subfile{part-ib/complex-ana}
		\subfile{part-ib/complex-met}
		\subfile{part-ib/geometry}
		\subfile{part-ib/methods}
	
	\part{Part II}
		\subfile{part-ii/number}
		\subfile{part-ii/topics-ana}
		\subfile{part-ii/coding-crypto}
		\subfile{part-ii/automata}
		\subfile{part-ii/logic-set}
		\subfile{part-ii/graph-theory}
		\subfile{part-ii/galois-theory}
		\subfile{part-ii/rep-theory}
		\subfile{part-ii/num-field}
		\subfile{part-ii/alg-topo}
		\subfile{part-ii/linear-ana}
		\subfile{part-ii/ana-func}
		\subfile{part-ii/riemann}
		\subfile{part-ii/alg-geo}
		\subfile{part-ii/diff-geo}
		\subfile{part-ii/prob-measure}
	
	\part{Part III}
		\subfile{part-iii/set_theory}
		\subfile{part-iii/category}
		\subfile{part-iii/model_theory}
		\subfile{part-iii/modular-form}
	\backmatter
		\printindex
		
%		\begin{equation*}
%			(9)^{2558} = (10 - 1)^{2558} = \binom{2558}{0}10^{2558} - \binom{2558}{1}10^{2557}\cdot 1 + \binom{2558}{2}{10}^{2557}\cdot 1^2 - \cdots - \binom{2558}{2557}5\cdot 1^{2557} + \binom{2558}{2558}1^{2558} \\
\end{document}
		